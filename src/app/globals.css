/* app/globals.css */

@import "tailwindcss";

/*
   亮色模式的 CSS 变量 (默认值，并在 <html> 上有 .light 类时生效)
   这里定义了亮色主题下的所有基础颜色变量。
*/
:root,
html.light {
  --background: #fcfcfc; /* 亮色背景：稍微暖一点的白色，避免纯白刺眼 */
  --foreground: #333333; /* 亮色前景色：更纯粹的深灰，提供良好对比度 */

  --color-primary-default: #3b82f6; /* 保持蓝色，可根据喜好调整 */
  --color-primary-light: #60a5fa;
  --color-primary-dark: #2563eb;
  --color-secondary: #8b5cf6; /* 保持紫色，作为次要强调色 */

  /* 调整中性色系列，使其在亮色模式下更柔和、更具层次感 */
  --color-neutral-50: #f8f8f8;   /* 最浅的灰，用于背景或边框 */
  --color-neutral-100: #f0f0f0;  /* 浅灰 */
  --color-neutral-200: #e0e0e0;  /* 适用于亮色模式下的悬停背景、边框 */
  --color-neutral-300: #d0d0d0;
  --color-neutral-400: #a0a0a0;
  --color-neutral-500: #707070;
  --color-neutral-600: #505050;  /* 默认文本色 */
  --color-neutral-700: #404040;  /* 较深文本色 */
  --color-neutral-800: #303030;  /* 标题色 */
  --color-neutral-900: #202020;  /* 最深标题色 */
}

/*
   暗黑模式的 CSS 变量 (当 <html> 上有 .dark 类时生效)
   这里定义了暗黑主题下的所有基础颜色变量，会覆盖亮色模式的定义。
*/
html.dark {
  --background: #1B1C1D; /* 用户指定的暗黑背景色 */
  --foreground: #e0e0e0; /* 暗黑前景色：浅灰，与深色背景形成良好对比 */

  --color-primary-default: #60a5fa; /* 暗黑模式下的 primary 稍微亮一些，确保可见性 */
  --color-primary-light: #818cf8;
  --color-primary-dark: #3b82f6;
  --color-secondary: #a78bfa;

  /* 调整中性色系列，使其在暗黑模式下更适应深色背景，并提供足够的对比度 */
  --color-neutral-50: #2a2b2c;   /* 暗黑模式下的浅灰，用于背景或边框 */
  --color-neutral-100: #3a3b3c;
  --color-neutral-200: #4a4b4c;   /* 适用于暗黑模式下的悬停背景、边框，比背景亮 */
  --color-neutral-300: #5a5b5c;
  --color-neutral-400: #7a7b7c;
  --color-neutral-500: #9a9b9c;
  --color-neutral-600: #bababa;  /* 默认文本色 */
  --color-neutral-700: #cacaca;  /* 较深文本色 */
  --color-neutral-800: #dadada;  /* 标题色 */
  --color-neutral-900: #eaeaea;  /* 最深标题色 */
}


/* Prism.js 核心样式 - 所有主题都需要 */
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  border-radius: 0.3em;
  background: var(--prism-background); /* 使用主题变量 */
  color: var(--prism-text); /* 使用主题变量 */
}

code[class*="language-"],
pre[class*="language-"] {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 1em;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;
  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;
  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

/* Prism.js 语言高亮规则 - 根据 var(--prism-*) 调整 */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: var(--prism-comment);
}

.token.punctuation {
  color: var(--prism-text);
}

.token.selector,
.token.tag,
.token.constant,
.token.boolean,
.token.atrule,
.token.attr-value { /* attr-value in light theme is blue */
  color: var(--prism-tag);
}

.token.string,
.token.url {
  color: var(--prism-string);
}

.token.entity,
.token.keyword,
.token.control-flow, /* Added for control flow statements */
.token.operator,
.token.regex,
.token.important,
.token.variable { /* Added for variables */
  color: var(--prism-keyword);
}

.token.function,
.token.property-access { /* Added for property access like obj.prop */
  color: var(--prism-function);
}

.token.number {
  color: #fd971f; /* A common color for numbers, can be themed if needed */
}

/* 额外的，如果你使用了 `line-numbers` 插件 */
.line-numbers .line-numbers-rows {
  border-right-color: var(--prism-comment) !important;
}
.line-numbers-rows > span:before {
  color: var(--prism-comment) !important;
}

/*
   @theme inline 规则将上述 CSS 变量映射到 Tailwind 的主题系统。
   这样，你就可以在组件中使用 `theme('colors.background')` 或 `bg-background` 等 Tailwind 类。
*/
@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  --color-primary-default: var(--color-primary-default);
  --color-primary-light: var(--color-primary-light);
  --color-primary-dark: var(--color-primary-dark);
  --color-secondary: var(--color-secondary);
  --color-neutral-50: var(--color-neutral-50);
  --color-neutral-100: var(--color-neutral-100);
  --color-neutral-200: var(--color-neutral-200);
  --color-neutral-300: var(--color-neutral-300);
  --color-neutral-400: var(--color-neutral-400);
  --color-neutral-500: var(--color-neutral-500);
  --color-neutral-600: var(--color-neutral-600);
  --color-neutral-700: var(--color-neutral-700);
  --color-neutral-800: var(--color-neutral-800);
  --color-neutral-900: var(--color-neutral-900);
}

/*
   自定义高斯模糊类 (保持不变)。
   这些类将用于在 Header 背景层应用 filter: blur()。
*/
.blur-px { filter: blur(1px); }
.blur-xs { filter: blur(2px); }
.blur-sm { filter: blur(4px); }
.blur-md { filter: blur(8px); }
.blur-lg { filter: blur(16px); }
.blur-xl { filter: blur(24px); }
.blur-2xl { filter: blur(40px); }
.blur-3xl { filter: blur(64px); }

/* 全局自定义样式，这些将覆盖 Tailwind 的默认设置或添加额外规则 */
body {
  background: var(--background);
  color: var(--foreground);
  font-family: 'Inter', sans-serif; /* 确保字体设置正确 */
  line-height: 1.6;
  /* 添加平滑过渡，让主题切换更自然 */
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* 确保你的 `prose` 样式和其他组件样式也使用了 theme('colors.foreground') 等方式，
   而不是硬编码颜色值，这样它们才能响应主题切换。
*/
.prose {
  color: theme('colors.foreground');
  /* ... 其他 .prose 样式 ... */
}

/*
   NProgress 样式自定义
   这里我们覆盖 NProgress 的默认颜色，使用我们主题的 primary-default 颜色变量。
*/
#nprogress {
  pointer-events: none;
}

#nprogress .bar {
  background: var(--color-primary-default); /* 使用主题的 primary-default 颜色 */
  position: fixed;
  z-index: 1031; /* 确保在最顶层 */
  top: 0;
  left: 0;
  width: 100%;
  height: 2px; /* 进度条高度 */
}

/* 针对 Safari 的加载动画 */
#nprogress .peg {
  display: block;
  position: absolute;
  right: 0px;
  width: 100px;
  height: 100%;
  box-shadow: 0 0 10px var(--color-primary-default), 0 0 5px var(--color-primary-default);
  opacity: 1.0;
  -webkit-transform: rotate(3deg) translate(0px, -4px);
  -ms-transform: rotate(3deg) translate(0px, -4px);
  transform: rotate(3deg) translate(0px, -4px);
}

/* 进度条的旋转加载器 */
#nprogress .spinner {
  display: block;
  position: fixed;
  z-index: 1031;
  top: 15px;
  right: 15px;
}

#nprogress .spinner-icon {
  width: 18px;
  height: 18px;
  box-sizing: border-box;
  border: solid 2px transparent;
  border-top-color: var(--color-primary-default); /* 使用主题的 primary-default 颜色 */
  border-left-color: var(--color-primary-default); /* 使用主题的 primary-default 颜色 */
  border-radius: 50%;
  -webkit-animation: nprogress-spinner 400ms linear infinite;
  animation: nprogress-spinner 400ms linear infinite;
}

.nprogress-custom-parent {
  overflow: hidden;
  position: relative;
}

.nprogress-custom-parent #nprogress .spinner,
.nprogress-custom-parent #nprogress .bar {
  position: absolute;
}

@-webkit-keyframes nprogress-spinner {
  0%   { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}
@keyframes nprogress-spinner {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}